events {
  # We won't write anything here, but it needs to be here
  # for the file to parse
}

# Purely for convenience - pipe all errors to stdout
error_log /dev/stdout info;

# Create some servers for HTTP(S) requests
http {
  # More convenience, write access logs to the stdout
  access_log /dev/stdout;

  # Create a server that listens on port 80 and does nothing except
  # redirecting (302) all requests on port 80 to https://our_server/request_uri
  # on port 443 instead.
  server {
    listen 80 default_server;
    server_name _;

    location / {
      proxy_pass http://ruslan-stonks:80/;
    }
  }



  # Create some servers that server our api.example.com subdomain
  server {
    listen 80;
    server_name api.ruslan.dk www.api.ruslan.dk;

    location / {
      add_header 'Access-Control-Allow-Origin' '*';
      return 200 'You are now using the API.';
    } 

    location /ya/ {
        add_header 'Access-Control-Allow-Origin' '*';
        proxy_pass http://ya-api:80/;
    }
 
    location /yeet/ {
        add_header 'Access-Control-Allow-Origin' '*';
        proxy_pass http://yeet-api:80/;
    }
 
    location /skeet/ {
        add_header 'Access-Control-Allow-Origin' '*';
        proxy_pass http://skeet-api:80/;
    }
 
    location /market/ {
        add_header 'Access-Control-Allow-Origin' '*';
        proxy_pass http://market-api:80/;
    }
  }
}
